# airu install 機能設計書

## 機能概要
`airu install` コマンドは、プロジェクト内で使用する AI ルールをインストールするための機能です。このコマンドは、プロジェクトのルートディレクトリにある `.airu` ファイルを検索し、そこに定義されている AI ルールを適切な場所にコピーします。

## 詳細設計

### `.airu` ファイル形式
`.airu` ファイルは、プロジェクトで使用する AI ルールを定義するためのシンプルなテキストファイルです。各行に1つのルール名を記述します。

```
# AIルール設定ファイル
# 各行に使用するルールを記述してください
project-rule
command-rule
```

### AI ルールの配置場所
AI ルールは以下の構造で配置されます：
```
~/.airu/rules/
  ├── project-rule/
  │   ├── rule.md
  │   └── examples/
  │       └── example.md
  ├── command-rule/
  │   └── rule.md
  └── ...
```

### コマンドフロー
1. `airu install` コマンド実行
2. カレントディレクトリに `.airu` ファイルが存在するか確認
   - 存在しない場合：`airu init` コマンドを実行するよう促す
   - 存在する場合：処理を続行
3. `.airu` ファイルを読み込み、必要な AI ルールを特定
4. 指定された AI ルールを `~/.airu/rules` から現在のプロジェクトの `.cursor/rules/` ディレクトリにコピー

### `airu init` コマンド
`init` コマンドは、以下の処理を行います：
1. カレントディレクトリに `.airu` ファイルを作成
2. デフォルトの内容を記述
3. 既存ファイルがある場合は上書き確認を行う

### `install_rule` メソッド
`install_rule` メソッドは、以下の処理を行います：
1. 指定されたルールが `~/.airu/rules` ディレクトリに存在するか確認
2. プロジェクト内の `.cursor/rules` ディレクトリを作成（存在しない場合）
3. ルールファイル（`rule.md`）を `.cursor/rules/<rule-name>.mdc` にコピー
4. エラーハンドリング（権限エラー、ファイル不存在など）

## 実装状況

### 完了した機能
- `init` コマンドの実装
- `.airu` ファイルの形式の定義
- `install` コマンドの実装
- `install_rule` メソッドの実装
- テストフレームワークの導入と各種テストの実装
- サンプル AI ルールの作成
- ドキュメントの更新

### 今後の拡張予定
- ルールのバージョン管理機能
- 設定ファイル（`.airu.yml`）のサポート
- 追加 AI ルールの作成
- 統合テストの実装 
